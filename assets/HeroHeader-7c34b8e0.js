import{c as e,r as a,b as t,u as i,a as s}from"./vendor-0df5e6d0.js";import{m as n,u as r,a as o,A as l}from"./animations-7bba3a4b.js";import{i as c,d}from"./index-1c5a3f8d.js";const u=()=>{var i;const{i18n:s}=e(),r=a.useRef(null),o=a.useRef(null),[l,c]=a.useState(0),[d,u]=a.useState(!1),p=s.language.startsWith("zh")?"zh":"en",m=e=>{if(d)return;u(!0);const a="zh"===e?"zh-CN":"en-US";s.changeLanguage(a),document.documentElement.lang=a,setTimeout(()=>{u(!1)},600)};return a.useEffect(()=>{const e=()=>{const e="zh"===p?r.current:o.current;if(e){const a=e.getBoundingClientRect();c(a.width)}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[p]),t.jsx("div",{className:"language-switch",children:t.jsxs("div",{className:"language-toggle-container glass",children:[t.jsx(n.div,{className:"language-capsule-bg",animate:{x:"zh"===p?0:(null==(i=r.current)?void 0:i.offsetWidth)||0,width:l},transition:{type:"spring",stiffness:300,damping:25,mass:.8,bounce:.4}}),t.jsx(n.button,{ref:r,className:"lang-button",onClick:()=>m("zh"),whileHover:{scale:1.08,transition:{type:"spring",stiffness:400,damping:15,mass:.6}},whileTap:{scale:.92,transition:{type:"spring",stiffness:600,damping:20}},transition:{type:"spring",stiffness:300,damping:20},"aria-label":"切换到中文",children:t.jsx("span",{className:"lang-text",children:"中文"})}),t.jsx(n.button,{ref:o,className:"lang-button",onClick:()=>m("en"),whileHover:{scale:1.08,transition:{type:"spring",stiffness:400,damping:15,mass:.6}},whileTap:{scale:.92,transition:{type:"spring",stiffness:600,damping:20}},transition:{type:"spring",stiffness:300,damping:20},"aria-label":"Switch to English",children:t.jsx("span",{className:"lang-text",children:"EN"})})]})})},p=e=>a.useMemo(()=>e?(e=>c()?e:`${d.basePath}${e.startsWith("/")?e.slice(1):e}`)(e):"",[e]),m=({mounted:e,showHeader:a,headerProgress:i,isMobileMenuOpen:r,toggleMobileMenu:o,navItems:l,scrollToSection:c,activeSection:d,avatarPath:u,t:p})=>{if(!e||!a)return null;const m=()=>{if(i<=1)return 0;if(i<=2){const e=i-1;return Math.min(2*e,1)}return 1},h=()=>{if(i<=1)return 10;if(i<=2){return 10-10*(i-1)}return 0};return s.createPortal(t.jsxs("div",{className:"fixed-header-portal",style:{position:"fixed",top:"0",left:"0",right:"0",zIndex:9999,margin:"16px",padding:"12px 16px",display:"flex",alignItems:"center",justifyContent:"space-between",pointerEvents:"auto",width:"calc(100vw - 32px)",height:"auto"},children:[t.jsx(n.div,{style:{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"20px",backdropFilter:"blur(30px)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.1)",transformOrigin:"center"},initial:{scaleX:.1,opacity:0},animate:{scaleX:(()=>{if(i<=1)return.1;if(i<=2){const e=i-1;return e<.6?.1+1.3*e:1}return 1})(),opacity:i>.5?1:0},transition:{type:"spring",stiffness:400,damping:25,mass:.8,bounce:.3}}),t.jsxs("div",{style:{position:"relative",zIndex:1,display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[t.jsxs(n.div,{className:"brand",style:{opacity:m(),y:h()},initial:{opacity:0,y:10},animate:{opacity:m(),y:h()},transition:{type:"spring",stiffness:300,damping:20,mass:.6,bounce:.1,delay:.2},children:[t.jsx(n.div,{className:"avatar",style:{scale:i>1.5?.8:1},children:t.jsx("img",{src:u,alt:"Jerry Xu",className:"header-avatar-image"})}),t.jsxs(n.div,{className:"identity",style:{opacity:m(),x:i>1.5?0:-10},initial:{opacity:0,x:-10},animate:{opacity:m(),x:i>1.5?0:-10},transition:{type:"spring",stiffness:280,damping:18,mass:.5,bounce:.08,delay:.3},children:[t.jsx("h1",{className:"name",children:p("header.name")}),t.jsx("p",{className:"tagline",children:p("header.tagline")})]})]}),(()=>{const e=r?{opacity:1,y:0}:{opacity:0,y:10},a=r?{opacity:1,y:0}:{opacity:m(),y:h()};return t.jsx(n.nav,{className:"site-nav "+(r?"nav-open":""),initial:e,animate:a,transition:{type:"spring",stiffness:250,damping:16,mass:.4,bounce:.05,delay:.4},children:l.map(e=>t.jsx("a",{href:`#${e.id}`,onClick:a=>{a.preventDefault(),c(e.id)},className:d===e.id?"active":"",children:e.label},e.id))})})(),t.jsx(n.button,{className:"nav-toggle "+(r?"nav-open":""),onClick:o,"aria-label":"Toggle Menu",style:{opacity:m(),y:h()},initial:{opacity:0,y:10},animate:{opacity:m(),y:h()},transition:{type:"spring",stiffness:220,damping:14,mass:.3,bounce:.03,delay:.5},children:t.jsx("span",{})})]})]}),document.body)},h=({activeSection:s})=>{const[c,d]=a.useState(!1),[h,y]=a.useState(!1),[g,x]=a.useState(!1),[f,v]=a.useState(0),[b,j]=a.useState(!1),N=p("/avatar.jpg"),w=a.useRef(!1),I=a.useRef(0),S=a.useRef([]),{ref:k,inView:O}=i({threshold:.1}),{t:T}=e(),{scrollY:E}=r(),z=o(E,[0,300],[1.2,.4]),C=o(E,[0,300],[0,-200]),M=o(E,[0,250],[1,0]);o(E,[100,150],[0,1],{clamp:!0}),o(E,[150,200],[.3,1],{clamp:!0}),o(E,[200,300],[.2,1],{clamp:!0}),o(E,[100,100],[0,1],{clamp:!0}),o(E,[0,400],[0,0]),o(E,[0,400],[0,0]);const H=[{id:"about",label:T("header.navigation.1.label")},{id:"reach-me",label:T("header.navigation.0.label")},{id:"education",label:T("header.navigation.2.label")},{id:"skills",label:T("header.navigation.3.label")},{id:"experience",label:T("header.navigation.4.label")},{id:"work-projects",label:T("header.navigation.5.label")},{id:"personal-projects",label:T("header.navigation.6.label")},{id:"research-experience",label:T("header.navigation.7.label")},{id:"calendar",label:T("calendar.title")}],X=a.useCallback(e=>{const a=document.getElementById(e);a&&a.scrollIntoView({behavior:"smooth",block:"start"}),d(!1)},[]),R=a.useCallback(()=>{console.log("scrollToHideHero clicked");const e=document.getElementById("dynamic-text");if(e)return e.scrollIntoView({behavior:"smooth",block:"start"}),void console.log("Scrolled to dynamic-text section");const a=document.getElementById("hero");if(a){const e=a.offsetHeight,t=e-50;console.log("Hero height:",e,"Target scroll:",t),window.scrollTo({top:t,behavior:"smooth"})}else console.log("Neither hero nor about element found")},[]),P=a.useCallback(()=>{d(!c)},[c]);a.useEffect(()=>{y(!0)},[]),a.useEffect(()=>{if(O&&!b){const e=setTimeout(()=>{j(!0)},2e3);return()=>clearTimeout(e)}},[O,b]);const B=()=>{S.current.forEach(e=>clearTimeout(e)),S.current=[]};return a.useEffect(()=>{const e=E.on("change",e=>{const a=e,t=I.current;return!w.current&&t<=250&&a>250?(w.current=!0,x(!0),B(),S.current.push(setTimeout(()=>v(1),0)),S.current.push(setTimeout(()=>v(2),200)),void S.current.push(setTimeout(()=>v(3),400))):a<50?(B(),x(!1),v(0),void(w.current=!1)):w.current?(x(!0),void v(3)):void(I.current=a)});return()=>{e(),B()}},[E]),t.jsxs(t.Fragment,{children:[t.jsxs("section",{id:"hero",className:"hero",children:[t.jsxs("div",{className:"hero-glow-effects",children:[t.jsx(n.div,{className:"hero-glow hero-glow-1",animate:{scale:[1,1.2,1],opacity:[.6,.9,.6]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),t.jsx(n.div,{className:"hero-glow hero-glow-2",animate:{scale:[1,1.15,1],opacity:[.5,.8,.5]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:2}})]}),t.jsxs("div",{className:"hero-container",children:[t.jsx(n.div,{ref:k,className:"hero-avatar-container",style:{scale:z,y:C,opacity:M},initial:{scale:1.2,opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:t.jsx(n.div,{className:"hero-avatar glass",style:{scale:z,opacity:M},initial:{scale:1.2,opacity:1},transition:{duration:.8,ease:"easeOut"},children:t.jsx("img",{src:N,alt:"Jerry Xu",className:"avatar-image"})})}),t.jsx(n.div,{className:"hero-greeting",style:{y:o(E,[0,300],[0,-100]),opacity:o(E,[0,200],[1,.4])},initial:{opacity:0,y:30},animate:b||O?{opacity:1,y:0}:{opacity:0,y:30},transition:{duration:.8,delay:.3,ease:"easeOut"},children:t.jsx("h1",{className:"greeting-text",children:t.jsx(l,{mode:"wait",children:t.jsx(n.span,{className:"greeting-zh",initial:{y:20,opacity:0,rotateX:-90},animate:{y:0,opacity:1,rotateX:0},exit:{y:-20,opacity:0,rotateX:90},transition:{duration:.4,ease:"easeInOut"},children:T("hero.greeting")},T("hero.greeting"))})})}),t.jsx(n.div,{className:"hero-language-switch",style:{y:o(E,[0,300],[0,-80]),opacity:o(E,[0,200],[1,.3])},initial:{opacity:0,y:20},animate:b||O?{opacity:1,y:0}:{opacity:0,y:20},transition:{duration:.6,delay:.6,ease:"easeOut"},children:t.jsx(u,{})})]}),t.jsx(n.div,{className:"scroll-indicator",style:{y:o(E,[0,200],[0,-50]),opacity:o(E,[0,150],[1,0]),cursor:"pointer"},initial:{opacity:0,y:30},animate:b||O?{opacity:1,y:0}:{opacity:0,y:30},transition:{duration:.8,delay:1.2,ease:"easeOut"},onClick:R,children:t.jsxs(n.div,{className:"scroll-indicator-content",animate:{y:[0,8,0],opacity:[.6,1,.6]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[t.jsx("div",{className:"scroll-text",children:t.jsx(l,{mode:"wait",children:t.jsx(n.span,{initial:{y:15,opacity:0,rotateX:-90},animate:{y:0,opacity:1,rotateX:0},exit:{y:-15,opacity:0,rotateX:90},transition:{duration:.3,ease:"easeInOut"},children:T("hero.scrollHint")},T("hero.scrollHint"))})}),t.jsxs("div",{className:"scroll-arrow",children:[t.jsx(n.div,{className:"arrow-line",animate:{scaleY:[1,.3,1],opacity:[.8,.3,.8]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}}),t.jsx(n.div,{className:"arrow-head",animate:{y:[0,4,0],opacity:[.8,1,.8]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})]})]})})]}),t.jsx(m,{mounted:h,showHeader:g,headerProgress:f,isMobileMenuOpen:c,toggleMobileMenu:P,navItems:H,scrollToSection:X,activeSection:s,avatarPath:N,t:T})]})};export{h as default};
